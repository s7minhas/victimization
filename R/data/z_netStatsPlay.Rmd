---
title: "net stats play"
date: "5/9/2018"
output: html_document
---

```{r setup}
if(Sys.info()['user'] %in% c('s7m', 'janus829')){ 
	source('~/Research/intraConfNetDyn/R/setup.R') }
pathGraphics = paste0(pathDrop, 'graphics/netStatsExplore/')
```

## net stats data

```{r}
# reorg to df
load(paste0(pathData, 'netStats.rda'))
netDF = do.call('rbind', netStats)
rownames(netDF) = NULL

# sep actor and graph level stats
netGraphDF = unique(netDF[,c(
	'country','year',
	names(netDF)[15:17])])
head(netGraphDF)

netActorDF = netDF[,c(
	'country','actor','year',
	names(netDF)[1:14] )]
head(netActorDF)
```

We calculate two sets of network statistics. Network statistics were only calculated for graphs with at least five actors. 

The first set is at the graph level and includes: 

- graph_recip: Compute the Reciprocity of an Input Graph or Graph Stack
- graph_trans: Compute the Transitivity of an Input Graph or Graph Stack
- graph_dens: Find the Density of a Graph

These are all stored in the `netGraphDF` object. Each of the statistics above were computed at the country-year level. 

The second set of statistics is at the actor level and includes: 

- inDegree: Number of incoming conflictual ties
- outDegree: Number of outgoing conflictual ties
- totDegree: inDegree + outDegree
- btwn: Vertex betweenness centrality  (see `igraph` for more details)
- power: Bonacich Power Centrality Scores of Network Positions  (see `igraph` for more details)
- inClose: Closeness centrality based on incoming ties  (see `igraph` for more details)
- outClose: Closeness centrality based on outgoing ties  (see `igraph` for more details)
- totClose: Closeness centrality based on total ties  (see `igraph` for more details)
- eigenCent: Eigenvector centrality (see `igraph` for more details)
- flow: Flow Betweenness Scores of Network Positions (see `sna` for more details)
- gcent: Compute the (Harary) Graph Centrality Scores of Network Positions (see `sna` for more details)
- icent: Information Centrality Scores of Network Positions (see `sna` for more details)
- lcent: Load Centrality Scores of Network Positions (see `sna` for more details)
- prestige: Calculate the Vertex Prestige Scores (see `sna` for more details)

Each of these statistics are stored at the actor-year-country level in the `netActorDF` object. 

## descriptive stats

### graph level

```{r}
summary(netGraphDF[,-c(1:2)])
```

Below we show the distributions of the graph level network statistics across all country-years.

```{r, fig.width=8, height=3}
ggNetGraphDF = gather(netGraphDF[,-c(1:2)])
ggplot(ggNetGraphDF, aes(x=value)) + 
	geom_density() +
	facet_wrap(~key, scales='free')
```

Next we break out the results by country. 

```{r, fig.width=8, height=4}
ggNetGraphCntryDF = gather(netGraphDF[,-c(2)], key=key, value=value, -country)
ggplot(ggNetGraphCntryDF, aes(x=country, y=value)) +
	geom_violin() + geom_point(alpha=.3) +
	facet_wrap(~key, scales='free') +
	xlab('') + ylab('') +
	theme(
		axis.text.x = element_text(angle=45, hjust=1, size=5)
		)
```

### actor level 

```{r}
summary(netActorDF[,-c(1:2)])
```

Below we show the distributions of the actor level network statistics across all actors. 

```{r}
ggActorGraphDF = gather(netActorDF[,-c(1:3)])
ggplot(ggActorGraphDF, aes(x=value)) + 
	geom_density() +
	facet_wrap(~key, scales='free')
```

And again we break out the results by country. 

```{r, fig.width=10, fig.height=10}
ggNetActorCntryDF = gather(netActorDF[,-c(2:3)], key=key, value=value, -country)
ggplot(ggNetActorCntryDF, aes(x=country, y=value)) +
	geom_violin() + geom_point(alpha=.3) +
	facet_wrap(~key, scales='free') +
	xlab('') + ylab('') +
	theme(
		axis.text.x = element_text(angle=45, hjust=1, size=5)
		)
```
